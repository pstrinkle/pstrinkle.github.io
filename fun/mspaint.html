---
layout: fun
title: ms paint
---
<p>
An attempt at making a fun pixel-driven paint utility in JS, for the fun of it.
</p>

I'd like to add:
<ul>
  <li>paintbucket fill</li>
  <li>pen size</li>
  <li>custom color picker</li>
  <li>right click color select</li>
  <li>resize</li>
  <li>zoom-in/out</li>
</ul>

<div id='container'></div>

<script>
$(function() {
    (function ($) {
        function PaintBox(config) {
            this.init(config);
        }

        PaintBox.prototype = {

            constructor: PaintBox,

            init: function(config) {
                $.extend(this, config);
            },

            el: null,
            penColor: 'black',
            penDown: false,
            cols: 40,
            rows: 40,

            clicked: function(event) {
                /* click's this is the individual element */
                var p = $(this).parent();
                var el = p.el;
                $(this).css('background-color', el.penColor);
            },
            colorSelect: function(event) {
                penColor = $(this).attr('id');
            },
        }

        $.fn.paintbox = function(configOrCommand) {
            var dataName = 'paintbox';

            /* handle init here, I later plan to use other options, such as 
             * formatting.
             */
            return this.each(function() {
                var el = $(this), instance = el.data(dataName),
                    config = $.isPlainObject(configOrCommand) ? configOrCommand : {};

                if (instance) {
                    /* they've set up some data values for us already to use. */
                    instance.init(config);
                } else {
                    var initialConfig = $.extend({}, el.data());
                    config = $.extend(initialConfig, config);
                    config.el = el;

                    instance = new PaintBox(config);
                    el.data(dataName, instance);

                    el.append($('<div>', {id: 'pen_box', style: 'clear:both;'}));
                    el.append($('<div>', {id: 'master_box', style: 'clear:both;'}));

                    var $dest = $('#master_box');
                    var i = 0, j = 0;
                    var itm = 'box';

                    /* fixup grid container. */
                    var master_width = cols * 10;
                    var master_height = rows * 10;
                    $dest.css('width', master_width + 'px');
                    $dest.css('height', master_height + 'px');
                        
                    /* build grid */
                    for (i = 0; i < instance.rows; i++) {
                        for (j = 0; j < instance.cols; j++) {
                            var $n = $('<div>');
                            $n.css('width', '10px');
                            $n.css('height', '10px');
                            $n.css('background-color', 'white');
                            $n.css('float', 'left');
                            $n.css('display', 'inline');

                            $n.attr('id', i + ',' + j);
                            $n.on('click', instance.clicked);
                            $n.addClass(itm);

                            $dest.append($n);
                        }
                    }

                    $('.box').hover(function(event) {
                        /* if pen is selected, and mousedown has been activated, then we 
                         * draw, otherwise we temporarily hover.
                         */
                        $(this).css('border', '1px solid ' + penColor);

                        if (penDown) {
                            $(this).css('background-color', penColor);
                        }
                    }, function(event) {
                        /* if pen is selected, and mousedown has been activated, don't undo 
                         * things.
                         */
                        $(this).css('border', 'none');
                    });
                    
                    var colors = ['black', 'red', 'green', 'blue',
                                  'white', 'yellow', 'pink'];
                    
                    /* create pen boxes. */
                    $.each(colors, function(index, element) {
                        var $color = $('<div>', {id: element, style: "float:left"});
                        var $second = $('<div>', {style: "float:left"});
                    });

                    /* just do this next. */
                    $.each($('#pen_box').children(), function(index, element) {
                        $(element).css('width', '10px');
                        $(element).css('height', '10px');
                        $(element).css('float', 'left');
                        $(element).css('display', 'inline');

                        var id = $(element).attr('id');
                        if (id) {
                            $(element).css('background-color', id);
                            $(element).on('click', instance.colorSelect);

                            if (id === 'black') {
                                $(element).css('border', '1px solid white');
                            } else {
                                $(element).css('border', '1px solid black');
                            }
                        }
                    });
                          
                    $dest.on('mousedown', function(event) {
                        instance.penDown = true;
                    });
                    $dest.on('mouseup', function(event) {
                        instance.penDown = false;
                    });
                    $dest.on('mouseleave', function(event) {
                        instance.penDown = false;
                    });
                }
            });
        }    
    }(jQuery));

    $('#container').paintbox({});

});
</script>
