---
layout: fun
title: follow
---

<p>I thought it might be fun to have something basically always facing where the mouse is, such that it basically follows the mouse 
from a fixed position.  I'm thinking about doing it in with the circle-javascript as the underlying mechanic for handling the canvas
updates.</p>

<div class="row">
  <div class="col-md-2"></div>
  <div class="col-md-2"></div>
  <div class="col-md-4">
    <div id="c_circle"></div>
  </div>
  <div class="col-md-2"></div>
  <div class="col-md-2"></div>
</div>

<div class="row">
  <p id='where'></p>
  <p id='angle'></p>
</div>

<script src="{{ site.github.url }}/javascripts/jquery-circle-progress/circle-progress.js"></script>

<script>
  $(function() {
    function pythag(x1, y1, x2, y2) {
      var x = x2 - x1;
      var y = y2 - y1;
      var a = (x * x) + (y * y);
      return Math.sqrt(a);
    }

    var $gb = $('#c_circle');
    var position = $gb.offset();
    var realWidth = $gb.outerWidth();
    var realHeight = $gb.outerHeight();
    var middleX = position.left + (realWidth/2);
    var middleY = position.top + (realHeight/2);

    $('#c_circle').circleProgress({
      value: 0.75,
      size: 100,
      fill: { gradient: ["white", "blue"] },
      animation : { duration: 10 },
    });

    $(document).mousemove(function(event) {
      $('#where').text(event.pageX + ", " + event.pageY);
      
      var newY = 0;
      var newX = 0;
      /* To leverage Math.atan2() I need to base their location off the circle as the x,y,0,0
       * 
       * I may need to update X...
       * I'll need to use a piece of paper to determine the transform, or I could just use a different approach.
       */
      if (event.pageY > middleY) {
        /* we are below it. */
        newY = event.pageY - middleY;
        var diff = newY / event.pageY;
        newX = diff * event.pageX;
      } else if (event.pageY < middleY) {
        /* we are above it. */
        newY = middleY - event.pageY;
        var diff = newY / middleY;
        newX = diff * event.pageX;
      } else {
        newY = 0;
        newX = 0;
      }
      var radians = Math.atan2(newY, newX);
      var degrees = radians * (180 / Math.PI);
      var percentage = degrees / 360;

      $('#angle').text(degrees);
      $('#c_circle').circleProgress('value', percentage);
    })
  });
</script>
